#
#
#

variable:
# default(debug)
- name: compiler
  value: clang++
- name: archiver
  value: ar
- name: linker
  value: clang++

# windows clang
- name: compiler
  value: c:/Program Files/LLVM/bin/clang++.exe
  type: winclang
- name: archiver
  value: c:/Program Files/LLVM/bin/llvm-ar.exe
  type: winclang
- name: linker
  value: c:/Program Files/LLVM/bin/clang++.exe
  type: winclang

- name: txt2c
  value: $txt2c -o $out $in

- name: txt2c_go
  value: go build -o $out $in

include:
- list:
  - ./include
  - ./data
- type: winclang
  list:
  - c:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include
  - C:/Program Files (x86)/Windows Kits/10/Include/10.0.10240.0/ucrt
  - C:/Program Files/Microsoft SDKs/Windows/v6.0A/Include

option:
- list:
  - c
  - g
  - Wall
  - std=c++14
  - Werror
  - MMD
  - MT $out
  - MF $dep
  debug:
  - O0
  release:
  - O3

define:
- target: test3
  list:
  - TEST3

archive_option:
- list:
  - rc

link_option:
- type: winclang
  list:
  - v
  - static
  - LC:/Program Files/Microsoft SDKs/Windows/v6.0A/Lib
  - LC:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/lib/amd64
  - LC:/Program Files (x86)/Windows Kits/10/Lib/10.0.10240.0/ucrt/x64
  - lstdc++

source:
- target: test
  list:
  - test.cpp
  - sub/test_sub.cpp
  - $hello.cpp
- target: test2
  list:
  - test2.cpp
- target: test3
  list:
  - test2.cpp

prebuild:
- name: hello.cpp
  command: txt2c
  source:
  - list:
    - hello.txt
- name: txt2c
  command: txt2c_go
  source:
  - list:
    - txt2c.go

target:
- name: test
  type: execute
- name: test2
  type: execute
- name: test3
  type: execute

subdir:
- list:
  - data

# end
